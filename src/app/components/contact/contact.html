<section id="contact" class="section contact" aria-labelledby="contact-heading">
  <div class="section__container">
    <h2 id="contact-heading" class="section__heading">Get In Touch</h2>
    <p class="section__subheading">
      Have a project in mind or want to discuss an opportunity? I'd love to hear from you.
    </p>

    <div class="contact__layout">
      <!-- Contact Info -->
      <div class="contact__info">
        <h3 class="contact__info-heading">Let's Talk</h3>
        <p class="contact__info-text">
          Whether you have a question, a project proposal, or just want to say hello â€”
          my inbox is always open. I typically respond within 24 hours.
        </p>

        <dl class="contact__details">
          <div class="contact__detail">
            <dt class="sr-only">Email</dt>
            <dd>
              <a href="mailto:john@example.com" class="contact__detail-link">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                  <polyline points="22,6 12,13 2,6"/>
                </svg>
                john&#64;example.com
              </a>
            </dd>
          </div>
          <div class="contact__detail">
            <dt class="sr-only">Location</dt>
            <dd>
              <span class="contact__detail-item">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                  <circle cx="12" cy="10" r="3"/>
                </svg>
                San Francisco, CA
              </span>
            </dd>
          </div>
        </dl>
      </div>

      <!-- Form -->
      <div class="contact__form-wrapper">
        @if (submitState() === 'success') {
          <div
            class="contact__success"
            role="status"
            aria-live="polite"
            aria-atomic="true"
          >
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="16,8 10,14 7,11"/>
            </svg>
            <h3>Message Sent!</h3>
            <p>Thank you for reaching out. I'll get back to you soon.</p>
          </div>
        } @else {
          <form
            [formGroup]="form"
            (ngSubmit)="onSubmit()"
            class="contact__form"
            novalidate
            aria-label="Contact form"
          >
            <!-- Name -->
            <div class="contact__field">
              <label for="contact-name" class="contact__label">
                Full Name <span aria-hidden="true" class="contact__required">*</span>
              </label>
              <input
                id="contact-name"
                type="text"
                formControlName="name"
                class="contact__input"
                [class.contact__input--error]="isInvalid('name')"
                autocomplete="name"
                [attr.aria-invalid]="isInvalid('name') ? 'true' : null"
                aria-describedby="contact-name-error"
                placeholder="Jane Smith"
              />
              @if (isInvalid('name')) {
                <p id="contact-name-error" class="contact__error" role="alert">
                  {{ getError('name') }}
                </p>
              }
            </div>

            <!-- Email -->
            <div class="contact__field">
              <label for="contact-email" class="contact__label">
                Email Address <span aria-hidden="true" class="contact__required">*</span>
              </label>
              <input
                id="contact-email"
                type="email"
                formControlName="email"
                class="contact__input"
                [class.contact__input--error]="isInvalid('email')"
                autocomplete="email"
                [attr.aria-invalid]="isInvalid('email') ? 'true' : null"
                aria-describedby="contact-email-error"
                placeholder="jane@example.com"
              />
              @if (isInvalid('email')) {
                <p id="contact-email-error" class="contact__error" role="alert">
                  {{ getError('email') }}
                </p>
              }
            </div>

            <!-- Message -->
            <div class="contact__field">
              <label for="contact-message" class="contact__label">
                Message <span aria-hidden="true" class="contact__required">*</span>
              </label>
              <textarea
                id="contact-message"
                formControlName="message"
                class="contact__input contact__textarea"
                [class.contact__input--error]="isInvalid('message')"
                rows="5"
                [attr.aria-invalid]="isInvalid('message') ? 'true' : null"
                aria-describedby="contact-message-error"
                placeholder="Tell me about your project..."
              ></textarea>
              @if (isInvalid('message')) {
                <p id="contact-message-error" class="contact__error" role="alert">
                  {{ getError('message') }}
                </p>
              }
            </div>

            <button
              type="submit"
              class="contact__submit"
              [class.contact__submit--loading]="submitState() === 'submitting'"
              [attr.aria-busy]="submitState() === 'submitting' ? 'true' : null"
              [disabled]="submitState() === 'submitting'"
            >
              @if (submitState() === 'submitting') {
                <span class="contact__spinner" aria-hidden="true"></span>
                Sending...
              } @else {
                Send Message
              }
            </button>
          </form>
        }
      </div>
    </div>
  </div>
</section>
